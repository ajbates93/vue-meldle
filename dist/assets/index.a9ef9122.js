import{r as P,o as C,K as $,w as k,a as u,c as g,t as m,n as f,F as T,b as R,d as I,e as j,u as G,f as o,g as x,h as d,i as L,j as B,k as H,l as K,m as F}from"./vendor.5d2f6e52.js";const V=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerpolicy&&(l.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?l.credentials="include":a.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=s(a);fetch(a.href,l)}};V();const Y={class:"simple-keyboard"},X={props:{guessedLetters:Object},emits:["onKeyPress"],setup(t,{emit:e}){const s=t,r=P(null),a=l=>{e("onKeyPress",l)};return C(()=>{r.value=new $("simple-keyboard",{layout:{default:["Q W E R T Y U I O P","A S D F G H J K L","{enter} Z X C V B N M {bksp}"]},display:{"{bksp}":"\u274C","{enter}":"\u2705"},onKeyPress:a})}),k(()=>s.guessedLetters,(l,i)=>{r.value.addButtonTheme(l.miss.join(" "),"miss"),r.value.addButtonTheme(l.found.join(" "),"found"),r.value.addButtonTheme(l.hint.join(" "),"hint")},{deep:!0}),(l,i)=>(u(),g("div",Y))}},J={props:{letter:{type:String,default:""},colour:{type:String,default:""}},setup(t){return(e,s)=>(u(),g("div",{class:f(["col-span-1 flex items-center justify-center h-16 uppercase border-2 border-gray-200 transition-all duration-300 font-bold text-xl",{"border-gray-500 bg-gray-500 text-white":t.colour=="gray","border-green-600 bg-green-600 text-white":t.colour=="green","border-yellow-500 bg-yellow-500 text-white":t.colour=="yellow"}])},m(t.letter),3))}},z={props:{value:String,solution:String,submitted:Boolean,shake:Boolean},emits:["submitColourRow"],setup(t,{emit:e}){const s=t,r=P(["","","","",""]);return k(()=>s.submitted,async(a,l)=>{if(s.submitted){let i=s.solution,_=s.value,h=["gray","gray","gray","gray","gray"],D=[];for(let n=0;n<5;n++)i.charAt(n)==_.charAt(n)?h[n]="green":D.push(i.charAt(n));for(let n=0;n<5;n++)h[n]=="gray"&&D.indexOf(_.charAt(n))!==-1&&(D.splice(D.indexOf(_.charAt(n)),1),h[n]="yellow"),r.value[n]=h[n],await new Promise(c=>setTimeout(c,200));e("submitColourRow",Object.values(r.value))}}),(a,l)=>(u(),g("div",{class:f(["grid max-w-xs grid-cols-5 gap-1 mx-auto mb-1",t.shake?"animate-shake":""]),style:j(t.shake?"transform: translate3d(0,0,0); backface-visibility: hidden;":"")},[(u(),g(T,null,R(5,i=>I(J,{key:i,letter:t.value[i-1],colour:r.value[i-1]},null,8,["letter","colour"])),64))],6))}},Z={class:"border-b border-gray-200 py-3 relative"},q=o("h1",{class:"flex justify-center text-3xl font-bold"},"MELDLE",-1),Q=o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),ee=[Q],te={setup(t){const e=G(),s=()=>{e.commit("settings/SHOW_SETTINGS",!0)};return(r,a)=>(u(),g("header",Z,[q,o("a",{href:"javascript:void(0)",class:"absolute right-4 top-2/4",style:{transform:"translateY(-50%)"},onClick:s},ee)]))}},se={class:"relative bg-white"},ae=o("h3",{class:"text-center font-bold text-xl mb-5"},"Statistics",-1),ne=o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),oe=[ne],re={class:"stats-values grid gap-2 grid-cols-4"},le={class:"item"},ie=["textContent"],de=o("span",{class:"label block text-center text-xs"},"Played",-1),ce={class:"item"},ue=["textContent"],ge=o("span",{class:"label block text-center text-xs"},"Win %",-1),Se={class:"item"},_e=["textContent"],Ee=o("span",{class:"label block text-center text-xs"},"Current Streak",-1),we={class:"item"},he=["textContent"],De=o("span",{class:"label block text-center text-xs"},"Max Streak",-1),me={class:"stats-charts my-5"},pe=o("h5",{class:"font-bold mb-2"},"Total Guesses",-1),fe={setup(t){const e=G(),s=()=>{e.commit("settings/SHOW_SETTINGS",!1)},r=x(()=>{let a=e.state.stats.guesses;return delete a.fail,a});return(a,l)=>(u(),g(T,null,[o("div",{id:"overlay",class:f(["z-40 bg-gray-400 fixed w-full h-full top-0 left-0 transition-all",d(e).state.settings.showSettings?"opacity-75 visible":"opacity-0 hidden"])},null,2),o("div",{class:f(["z-50 w-2/4 fixed p-5 top-2/4 left-2/4 bg-white shadow-xl rounded-lg transition-all",d(e).state.settings.showSettings?"opacity-100 visible":"opacity-0 hidden"]),style:{transform:"translate(-50%, -50%)","max-width":"350px","min-width":"300px"}},[o("div",se,[ae,o("a",{onClick:s,class:"absolute right-0 top-0",href:"javascript:void(0)"},oe),o("div",re,[o("div",le,[o("span",{class:"value block text-center text-2xl",textContent:m(d(e).state.stats.gamesPlayed)},null,8,ie),de]),o("div",ce,[o("span",{class:"value block text-center text-2xl",textContent:m(d(e).state.stats.winPercentage)},null,8,ue),ge]),o("div",Se,[o("span",{class:"value block text-center text-2xl",textContent:m(d(e).state.stats.currentStreak)},null,8,_e),Ee]),o("div",we,[o("span",{class:"value block text-center text-2xl",textContent:m(d(e).state.stats.maxStreak)},null,8,he),De])]),o("div",me,[pe,(u(!0),g(T,null,R(d(r),(i,_)=>(u(),g("div",{class:"chart",key:_},m(_)+": "+m(i),1))),128))])])],2)],64))}},M=[{word:"melba",date:new Date("02/04/2022").toDateString()},{word:"norks",date:new Date("02/05/2022").toDateString()},{word:"melee",date:new Date("02/06/2022").toDateString()},{word:"wench",date:new Date("02/07/2022").toDateString()},{word:"melts",date:new Date("02/08/2022").toDateString()},{word:"timmy",date:new Date("02/09/2022").toDateString()},{word:"melon",date:new Date("02/10/2022").toDateString()},{word:"elite",date:new Date("02/11/2022").toDateString()},{word:"smell",date:new Date("02/12/2022").toDateString()},{word:"haway",date:new Date("02/13/2022").toDateString()},{word:"AROSE",date:new Date("02/14/2022").toDateString()},{word:"TRISS",date:new Date("02/15/2022").toDateString()},{word:"NORSE",date:new Date("02/16/2022").toDateString()},{word:"RUGBY",date:new Date("02/17/2022").toDateString()},{word:"FRANK",date:new Date("02/18/2022").toDateString()},{word:"SWORD",date:new Date("02/19/2022").toDateString()},{word:"STOUT",date:new Date("02/20/2022").toDateString()},{word:"GRUNT",date:new Date("02/21/2022").toDateString()},{word:"BUXOM",date:new Date("02/22/2022").toDateString()},{word:"SHEEP",date:new Date("02/23/2022").toDateString()},{word:"LUNNY",date:new Date("02/24/2022").toDateString()},{word:"FAITH",date:new Date("02/25/2022").toDateString()},{word:"BRUSH",date:new Date("02/26/2022").toDateString()},{word:"TROUT",date:new Date("02/27/2022").toDateString()},{word:"BASIL",date:new Date("02/28/2022").toDateString()},{word:"MATER",date:new Date("03/01/2022").toDateString()},{word:"GANKS",date:new Date("03/02/2022").toDateString()},{word:"CYBER",date:new Date("03/03/2022").toDateString()},{word:"PLANE",date:new Date("03/04/2022").toDateString()},{word:"BEERS",date:new Date("03/05/2022").toDateString()},{word:"LENIN",date:new Date("03/06/2022").toDateString()},{word:"TRAIN",date:new Date("09/23/2022").toDateString()},{word:"FRANK",date:new Date("09/24/2022").toDateString()},{word:"WENCH",date:new Date("09/25/2022").toDateString()}],Te=async t=>{const e=t.toLowerCase();return(await fetch("allowed.txt").then(l=>l.text())).replace(/(\r\n|\n|\r)/gm,"").includes(e)},xe=async t=>{const e=M.findIndex(s=>s.date==t);if(e===-1){const a=(await fetch("answers.txt").then(i=>i.text())).replace(/(\r\n|\n|\r)/gm,`
`).split(`
`);return a[Math.floor(Math.random()*a.length)]}else return M[e].word};const ye={class:"flex flex-col h-screen max-w-md mx-auto justify-evenly meldle-app relative"},Ae={key:0,class:"inline-flex flex-col items-center justify-center text-center font-bold"},ve=o("span",null,"\u{1F37B} Congratulations! Mel would be proud.",-1),Ie={key:1,class:"inline-flex flex-col items-center justify-center text-center font-bold"},Ne=B(" \u{1F61E} Out of tries. No Timmy Taylors for you. "),be={setup(t){const e=G(),s=x(()=>e.state.guesses[e.state.currentGuessIndex-1]===e.state.solution),r=x(()=>!s.value&&e.state.currentGuessIndex>=6),a=()=>{e.commit("SET_INVALID_GUESS",!0),setTimeout(()=>e.commit("SET_INVALID_GUESS",!1),1500)},l=async n=>{if(e.state.currentGuessIndex>=6||s.value)return;const c=e.state.guesses[e.state.currentGuessIndex];if(n=="{enter}"){if(!await Te(c))a();else if(c.length==5){e.commit("INCREMENT_CURRENT_GUESS_INDEX");for(var E=0;E<c.length;E++){let S=c.charAt(E);S==e.state.solution.charAt(E)?e.commit("ADD_TO_GUESSED_LETTERS_FOUND",S):e.state.solution.indexOf(S)!=-1?e.commit("ADD_TO_GUESSED_LETTERS_HINT",S):e.commit("ADD_TO_GUESSED_LETTERS_MISS",S)}e.dispatch("updateProgress"),e.dispatch("stats/updateAndFetchStats",{wonGame:s.value,lostGame:r.value,currentGuessIndex:r.value?"fail":e.state.currentGuessIndex})}}else n=="{bksp}"?e.commit("REMOVE_LAST_LETTER",{index:e.state.currentGuessIndex,value:c}):c.length<5&&/[a-zA-Z]/.test(n)&&e.commit("ADD_LETTER",{index:e.state.currentGuessIndex,value:n})},i=()=>{const n=s?`I'M A VICTORIOUS MEL! \u{1F3C6} I GOT TODAY'S MELDLE IN ${e.state.currentGuessIndex} ${e.state.currentGuessIndex===1?"TRY":"TRIES"}.

${h.value}

 Diddleberg.`:`SHAME UPON ME AND MY FAMILY! \u{1F480} I FAILED TODAY'S MELDLE AND HAVE FORFEITED ALL RIGHTS TO FUTURE WENCHING.

${h.value}

 No Diddleberg.`;try{navigator.share({title:"MELDLE RESULTS",text:n,url:"https://ajbates93.github.io/vue-meldle/"}).then(()=>{e.commit("UPDATE_SHARED_DATA",!0)}).catch(c=>{throw e.commit("UPDATE_SHARED_DATA",!1),new Error("Error: ",c)})}catch(c){throw e.commit("UPDATE_SHARED_DATA",!1),new Error("Error: ",c)}},_=n=>{e.commit("SUBMIT_TO_COLOUR_ROW",{index:e.state.currentGuessIndex-1,value:n})},h=x(()=>{const n="\u2B1C",c="\u{1F7E8}",E="\u{1F7E9}";let w=JSON.parse(JSON.stringify(e.state.coloursGrid)),S=[];for(var y=0;y<w.length;y++){let U=w[y];S.push([]);for(var N=0;N<U.length;N++){let b=U[N],v=S[y];b=="gray"&&v.push(n),b=="green"&&v.push(E),b=="yellow"&&v.push(c),v.join("")}}let A=S.join(`
`).replaceAll(",",""),O=A.lastIndexOf(`

`);return O!==-1&&(A=A.substring(0,O)),A}),D=x(()=>navigator.share);return C(()=>{e.dispatch("fetchProgress"),e.dispatch("stats/fetchStats"),window.addEventListener("keyup",n=>{n.preventDefault();let c=n.keyCode==13?"{enter}":n.keyCode==8?"{bksp}":String.fromCharCode(n.keyCode).toUpperCase();l(c)})}),(n,c)=>(u(),g(T,null,[I(d(te)),o("div",ye,[o("div",{class:f(["absolute top-10 left-2/4 text-center z-50 p-2 bg-gray-700 text-white opacity-0 font-bold transition-opacity rounded-md",d(e).state.invalidGuess?"animate-fade-in-up opacity-100":""]),style:{transform:"translateX(-50%)"},id:"notValidWordWarning"},"Not in word list",2),o("div",null,[(u(!0),g(T,null,R(d(e).state.guesses,(E,w)=>(u(),H(d(z),{key:w,value:E,solution:d(e).state.solution,submitted:w<d(e).state.currentGuessIndex,shake:d(e).state.invalidGuess&&d(e).state.currentGuessIndex===w,onSubmitColourRow:_},null,8,["value","solution","submitted","shake"]))),128))]),d(s)?(u(),g("p",Ae,[ve,d(D)?(u(),g("a",{key:0,href:"javascript:void(0)",onClick:i,class:"mt-5 rounded text-xl bg-green-600 text-white button font-bold py-2 px-3"},"Share")):L("",!0)])):d(r)?(u(),g("p",Ie,[Ne,d(D)?(u(),g("a",{key:0,href:"javascript:void(0)",onClick:i,class:"mt-5 rounded text-xl bg-red-600 text-white button font-bold py-2 px-3"},"Share")):L("",!0)])):L("",!0),I(d(X),{onOnKeyPress:l,guessedLetters:d(e).state.guessedLetters},null,8,["guessedLetters"]),I(d(fe))])],64))}};const Re=new Date,p=new Date(Re).toDateString(),Ge={winPercentage:100,currentStreak:0,gamesPlayed:0,gamesWon:0,guesses:{1:0,2:0,3:0,4:0,5:0,6:0,fail:0},maxStreak:0,lastPlayed:"",lastWon:"",lastCompleted:""},Le={fetchStats({state:t,commit:e}){const s=JSON.parse(localStorage.getItem("meldle-stats"));if(s)e("UPDATE_STATS",s);else{const r=JSON.stringify({...t});window.localStorage.setItem("meldle-stats",r)}},pushStats({state:t}){const e={...t},s=JSON.stringify({...e});window.localStorage.setItem("meldle-stats",s)},updateAndFetchStats({state:t,commit:e,dispatch:s},{wonGame:r,lostGame:a,currentGuessIndex:l}){const i=t;i.lastPlayed!==p&&(e("INCREMENT_GAMES_PLAYED"),e("UPDATE_LAST_PLAYED",p)),r&&i.lastWon!==p&&(e("INCREMENT_GAMES_WON"),e("INCREMENT_CURRENT_STREAK"),e("UPDATE_LAST_WON",p),i.currentStreak>=i.maxStreak&&e("UPDATE_MAX_STREAK",i.currentStreak)),a&&e("RESET_STREAK"),(r||a)&&i.lastCompleted!==p&&s("updateLastCompleted",l),s("calculateWinPercentage"),s("pushStats")},updateLastCompleted({commit:t},e){t("UPDATE_RESULT_INDEX_COUNT",e),t("UPDATE_LAST_COMPLETED",p)},calculateWinPercentage({commit:t,state:e}){const s=e.gamesWon/e.gamesPlayed*100;t("UPDATE_WIN_PERCENTAGE",s)}},Oe={UPDATE_STATS:(t,e)=>{Object.assign(t,e)},INCREMENT_GAMES_WON:t=>{t.gamesWon++},INCREMENT_GAMES_PLAYED:t=>{t.gamesPlayed++},UPDATE_LAST_WON:(t,e)=>{t.lastWon=e},UPDATE_LAST_PLAYED:(t,e)=>{t.lastPlayed=e},UPDATE_LAST_COMPLETED:(t,e)=>{t.lastCompleted=e},UPDATE_RESULT_INDEX_COUNT:(t,e)=>{t.guesses[e]++},INCREMENT_CURRENT_STREAK:t=>{t.currentStreak++},UPDATE_MAX_STREAK:(t,e)=>{t.maxStreak=e},RESET_STREAK:t=>{t.currentStreak=0},UPDATE_WIN_PERCENTAGE:(t,e)=>{t.winPercentage=e}},Ue={};var Pe={namespaced:!0,state:Ge,actions:Le,mutations:Oe,getters:Ue};const Ce={showSettings:!1},ke={},Me={SHOW_SETTINGS:(t,e)=>{t.showSettings=e}},We={};var $e={namespaced:!0,state:Ce,actions:ke,mutations:Me,getters:We};const je=new Date,Be=new Date(je).toDateString(),He=await xe(Be),Ke=K({state(){return{solution:He,guesses:["","","","","",""],coloursGrid:[[],[],[],[],[],[]],invalidGuess:!1,currentGuessIndex:0,guessedLetters:{miss:[],found:[],hint:[]},sharedData:!1}},getters:{},mutations:{INCREMENT_CURRENT_GUESS_INDEX:t=>{t.currentGuessIndex++},ADD_TO_GUESSED_LETTERS_FOUND:(t,e)=>{t.guessedLetters.found.push(e)},ADD_TO_GUESSED_LETTERS_HINT:(t,e)=>{t.guessedLetters.hint.push(e)},ADD_TO_GUESSED_LETTERS_MISS:(t,e)=>{t.guessedLetters.miss.push(e)},REMOVE_LAST_LETTER:(t,{index:e,value:s})=>{t.guesses[e]=s.slice(0,-1)},ADD_LETTER:(t,{index:e,value:s})=>{t.guesses[e]+=s},UPDATE_SHARED_DATA:(t,e)=>{t.sharedData=e},SUBMIT_TO_COLOUR_ROW:(t,{index:e,value:s})=>{t.coloursGrid[e]=s},UPDATE_GUESSES:(t,e)=>{t.guesses=e},UPDATE_CURRENT_GUESS_INDEX:(t,e)=>{t.currentGuessIndex=e},SET_INVALID_GUESS:(t,e)=>{t.invalidGuess=e}},actions:{fetchProgress({commit:t,state:e}){const s=JSON.parse(localStorage.getItem("meldle-progress")),r=new Date().toDateString();if(s)if(s&&s.date!==r){window.localStorage.removeItem("meldle-progress");const a=JSON.stringify({date:r,guesses:e.guesses,currentGuessIndex:e.currentGuessIndex});window.localStorage.setItem("meldle-progress",a)}else t("UPDATE_GUESSES",s.guesses),t("UPDATE_CURRENT_GUESS_INDEX",s.currentGuessIndex);else{const a=JSON.stringify({date:r,guesses:e.guesses,currentGuessIndex:e.currentGuessIndex});window.localStorage.setItem("meldle-progress",a)}},updateProgress({state:t}){const e=new Date().toDateString(),s=JSON.stringify({date:e,guesses:t.guesses,currentGuessIndex:t.currentGuessIndex});window.localStorage.setItem("meldle-progress",s)}},modules:{stats:Pe,settings:$e}}),W=F(be);W.use(Ke);W.mount("#app");
